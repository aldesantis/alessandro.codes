---
import Layout from "@layouts/Layout.astro";
import { getCollection } from "astro:content";
import ArrowLink from "@components/ui/ArrowLink.astro";
import BookCover from "@components/books/BookCover.astro";
import BookMeta from "@components/books/BookMeta.astro";
import ContentSidebar from "@components/content/ContentSidebar.astro";
import ContentLayout from "@components/content/ContentLayout.astro";

export async function getStaticPaths() {
  const books = await getCollection("books");

  return books.map((book) => ({
    params: { id: book.id },
    props: { book },
  }));
}

const { book } = Astro.props;
---

<title slot="head">{book.data.title} | Alessandro Desantis</title>

<Layout>
  <ContentLayout entry={book}>
    <ArrowLink
      href="/books"
      arrowDirection="left"
      class="font-sans font-semibold uppercase"
      slot="navigation"
    >
      Books
    </ArrowLink>

    <BookMeta book={book} slot="meta" />

    <ContentSidebar entry={book} slot="sidebar">
      <BookCover
        book={book}
        width="800"
        class="max-w-[250px] lg:max-w-[400px] h-auto rounded"
      />
    </ContentSidebar>
  </ContentLayout>
</Layout>
