---
import type { CollectionEntry } from "astro:content";

export interface Props {
  content: CollectionEntry<"recipes">;
  compact?: boolean;
}

const { content, compact = false } = Astro.props;

function getTypeEmoji(type: string): string {
  const emojiMap: Record<string, string> = {
    starter: "ğŸ¥—",
    "first-course": "ğŸ",
    "main-course": "ğŸ½ï¸",
    "single-dish": "ğŸ²",
    sauce: "ğŸ¯",
    side: "ğŸ¥”",
    dessert: "ğŸ°",
    other: "ğŸ´",
  };
  return emojiMap[type] || "ğŸ´";
}

function getCuisineEmoji(cuisine: string): string {
  const emojiMap: Record<string, string> = {
    "tex-mex": "ğŸŒ®",
    mediterranean: "ğŸ«’",
    bbq: "ğŸ–",
    asian: "ğŸœ",
    indian: "ğŸ›",
    american: "ğŸ”",
  };
  return emojiMap[cuisine] || "ğŸŒ";
}

function getDietEmoji(diet: string): string {
  const emojiMap: Record<string, string> = {
    omnivore: "ğŸ¥©",
    vegetarian: "ğŸ¥¬",
    vegan: "ğŸŒ±",
    pescetarian: "ğŸŸ",
  };
  return emojiMap[diet] || "ğŸ½ï¸";
}

function formatCuisine(cuisine: string): string {
  return cuisine
    .split("-")
    .map((word) => word.charAt(0).toUpperCase() + word.slice(1))
    .join("-");
}

function formatType(type: string): string {
  return type
    .split("-")
    .map((word) => word.charAt(0).toUpperCase() + word.slice(1))
    .join(" ");
}

function formatDiets(diets: string[]): string {
  return diets.map((diet) => diet.charAt(0).toUpperCase() + diet.slice(1)).join(", ");
}
---

<div class="text-sm text-stone-500 font-sans">
  {
    content.data.type && (
      <>
        <span>
          {getTypeEmoji(content.data.type)} {formatType(content.data.type)}
        </span>
      </>
    )
  }

  {
    content.data.cuisine && (
      <>
        <span class="mx-0.5">â€¢</span>
        <span>
          {getCuisineEmoji(content.data.cuisine)} {formatCuisine(content.data.cuisine)}
        </span>
      </>
    )
  }

  {
    !compact && content.data.diets && content.data.diets.length > 0 && (
      <>
        <span class="mx-0.5">â€¢</span>
        <span>
          {content.data.diets.map((diet) => getDietEmoji(diet)).join(" ")} {formatDiets(content.data.diets)}
        </span>
      </>
    )
  }
</div>
