---
import ContentStatus from "@components/content/ContentStatus.astro";
import RelativeDate from "@components/ui/RelativeDate.astro";
import TopicList from "@components/topics/TopicList.astro";
import type { CollectionEntry } from "astro:content";
import { render } from "astro:content";

export interface Props {
  content: CollectionEntry<"essays">;
}

const { content } = Astro.props;
const { remarkPluginFrontmatter } = await render(content);
---

<div class="text-sm text-stone-500 font-sans">
  <span><ContentStatus status={content.data.status} /></span>
  <span class="mx-0.5">•</span>
  <span>Planted <RelativeDate date={content.data.createdAt} /></span>
  {
    content.data.updatedAt && (
      <>
        <span class="mx-0.5">•</span>
        <span>
          Tended <RelativeDate date={content.data.updatedAt} />
        </span>
      </>
    )
  }
  {
    remarkPluginFrontmatter.readingTime && (
      <>
        <span class="mx-0.5">•</span>
        <span>
          {remarkPluginFrontmatter.readingTime} min
          {remarkPluginFrontmatter.readingTime != 1 ? "s" : ""} read
        </span>
      </>
    )
  }
  <TopicList topics={content.data.topics} />
</div>
